<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nuvo Login SDK demo</title>
    <link rel="stylesheet" href="./index.css" />
  </head>
  <body>
    <h1>Nuvo Login SDK demo</h1>
    <button class="login">Login or Signup</button>

    <script>
      const url = "http://localhost:1025";
      document.querySelector(".login").addEventListener("click", () => {
        const windowName = "Nuvo Login";
        // æ–°çª—å£çš„å®½åº¦å’Œé«˜åº¦
        const windowWidth = 480;
        const windowHeight = 551;

        // è®¡ç®—å±å¹•å±…ä¸­ä½ç½®
        const screenLeft = window.screenLeft || window.screenX;
        const screenTop = window.screenTop || window.screenY;
        const screenWidth =
          window.innerWidth ||
          document.documentElement.clientWidth ||
          screen.width;
        const screenHeight =
          window.innerHeight ||
          document.documentElement.clientHeight ||
          screen.height;

        const left = screenWidth / 2 - windowWidth / 2 + screenLeft;
        const top = screenHeight / 2 - windowHeight / 2 + screenTop;

        // é…ç½®æ–°çª—å£çš„ç‰¹æ€§
        const windowFeatures = `width=${windowWidth},height=${windowHeight},left=${left},top=${top},menubar=no,toolbar=no,location=no,scrollbars=yes`;

        // ä½¿ç”¨ window.open æ–¹æ³•æ‰“å¼€æ–°çš„çª—å£
        const popup = window.open(url, windowName, windowFeatures);

        // æ£€æŸ¥ popup æ˜¯å¦æˆåŠŸæ‰“å¼€
        if (!popup) {
          alert("Popup è¢«æµè§ˆå™¨é˜»æ­¢ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨è®¾ç½®ã€‚");
        }
      });
      window.addEventListener("message", function (event) {
        if (event.origin === new URL(url).origin) {
          console.log('ğŸŒŠ', event)
          // if (event.data === "nuvo-login-close") {
          //   NuvoLogin.style.display = "none";
          // }
        }
      });
    </script>
  </body>
</html>
